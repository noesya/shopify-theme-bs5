  {%- assign message = section.settings.top_message -%}
  {%- if message != blank -%}
    {%- assign align = '' -%}
    {%- if section.settings.top_align_message -%}
      {%- assign align = ' text-center' -%}
    {%- endif -%}
    <div class="alert alert-{{ section.settings.top_type_message }}{{ align }} mb-0 border-0 py-1 text-uppercase" role="alert">
      <div class="container">
        <small>{{ message }}</small>
      </div>
    </div>
  {%- endif -%}

  {%- assign logo = settings.header_logo -%}
  <nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top">
  <div class="container-fluid">

    <a class="navbar-brand" href="{{ shop.secure_url }}">
      {%- if logo -%}
        <img src="{{ logo | img_url }}" alt="{{ shop.name }}">
      {%- else -%}
        {{ shop.name }}
      {%- endif -%}
    </a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        {% for link in linklists.main-menu.links %}
        <li class="nav-item">
          {% assign child_list_handle = link.title | handleize %}
          {% if linklists[child_list_handle].links != blank %}
            <a href="{{ link.url }}" class="nav-link">{{ link.title }}</a>
            [{% for childlink in linklists[child_list_handle].links %}
              <a href="{{ childlink.url }}">{{ childlink.title | escape }}</a>
            {% endfor %}]
          {% else %}
            <a href="{{ link.url }}" class="nav-link">{{ link.title }}</a>
          {% endif %}
        </li>
        {% endfor %}
      </ul>

      <ul class="navbar-nav ml-auto mb-2 mb-lg-0">
        <li class="nav-item"><a href="{{ routes.cart_url }}" class="nav-link">cart</a></li>
        {% if shop.customer_accounts_enabled %}
          {% if customer %}
            <li class="nav-item"><a href="{{ routes.account_url }}" class="nav-link">{{ 'customer.account.title' | t }}</a></li>
            <li class="nav-item">{{ 'log out' | customer_logout_link | replace: '<a', '<a class="nav-link"' }}</li>
          {% else %}
            <li class="nav-item">{{ 'log in' | customer_login_link | replace: '<a', '<a class="nav-link"' }}</li>
            <li class="nav-item">{{ 'register' | customer_register_link | replace: '<a', '<a class="nav-link"' }}</li>
          {% endif %}
        {% endif %}
      </ul>
    </div>

  </div>
</nav>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "paragraph",
      "content": {
        "en": "Informative message at the top of the page.",
        "fr": "Message informatif en haut de la page."
      }
    },
    {
      "type": "textarea",
      "id": "top_message",
      "label": {
        "en": "Message",
        "fr": "Message"
      },
      "placeholder": {
        "en": "Message",
        "fr": "Message"
      }
    },
    {
      "type": "select",
      "id": "top_type_message",
      "label": {
        "en": "Which type?",
        "fr": "Quel type ?"
      },
      "default": "warning",
      "options": [
        {
          "value": "primary",
          "label": "Primary"
        },
        {
          "value": "secondary",
          "label": "Secondary"
        },
        {
          "value": "info",
          "label": "Info"
        },
        {
          "value": "danger",
          "label": "Danger"
        },
        {
          "value": "warning",
          "label": "Warning"
        },
        {
          "value": "success",
          "label": "Success"
        },
        {
          "value": "light",
          "label": "Light"
        },
        {
          "value": "dark",
          "label": "Dark"
        }
      ]
    },
    {
      "type": "checkbox",
      "id": "top_align_message",
      "default": false,
      "label": {
        "en": "Center text?",
        "fr": "Centrer le texteÂ ?"
      }
    }
  ]
}
{% endschema %}
