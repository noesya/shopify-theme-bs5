{% assign breakpoints = "375, 576, 640, 750, 768, 1080, 1152, 1200, 1366, 1440, 1536, 1920" %}

{%- if crop -%}
    {% assign crop = crop %}
{%- else -%}
    {% assign crop = 'center' %}
{%- endif -%}

{%- if size -%}
    {% assign img_url = src | img_url: size, crop: crop %}
    {% assign img_url_2x = src | img_url: size, scale: 2, crop: crop %}
{%- else -%}
    {% assign img_url = src | img_url: 'large' %}
    {% assign img_url_2x = src | img_url: 'large', scale: 2 %}
{%- endif -%}

{%- if alt -%}
    {% assign img_alt = alt | escape %}
{%- else -%}
    {% assign img_alt = src.alt | escape %}
{%- endif -%}

{% assign img_height = src.height %}

{% assign img_width = src.width | escape %}

<picture>
    {%- if mobile_size -%}
        {% assign img_desktop_url = img_url %}
        {% assign img_desktop_url_2x = img_url_2x %}
        {% assign img_url = src | img_url: mobile_size, crop: crop %}
        {% assign img_url_2x = src | img_url: mobile_size, scale: 2, crop: crop %}
        <source srcset="{{ img_desktop_url }}, {{ img_desktop_url_2x }} 2x" media="(min-width: 768px)">
    {%- endif -%}
    <img src="{{ img_url }}" height="{{ img_height }}" width="{{ img_width }}" alt="{{ img_alt }}"{%- unless no_lazy -%} loading="lazy"{%- endunless -%}{%- if img_class -%} class="{{Â img_class }}"{%- endif -%}>
</picture>
