{%- assign current_variant = item.selected_or_first_available_variant -%}
{%- assign featured_image = current_variant.featured_image | default: item.featured_image -%}
{%- assign featured_media = item.featured_media -%}
{%- assign poster = "256x150" -%}
<div class="card">

  {% if featured %}
    {%- assign poster = "635x400" -%}
    <div class="row no-gutters align-items-center">
      <div class="col-md-6">
  {% endif %}

  <div class="ratio ratio-1x1 ratio--contain bg-light">
    {%- if featured_media -%}
      {% case featured_media.media_type %}
        {% when 'image' %}
          {% include 'image', src: featured_image, size: '352x352', alt: item.title, img_class: 'card-img-top' %}
        {% when 'external_video' %}
          {% include 'external-video', media: featured_media %}
        {% when 'video' %}
          {% include 'video', media: featured_media, ratio: false, poster: poster, autoplay: true, mutted: true %}
      {% endcase %}
    {%- endif -%}
  </div>

  {% if featured %}
    </div>
    <div class="col-md-6">
  {% endif %}

    <div class="card-body">
      {% unless item.available %}<span class="badge bg-danger">{{ 'products.product.sold_out' | t }}</span>{% endunless %}
      <p class="h5 card-title{% if featured %} h1{% endif %}">{{ item.title }}</p>
      <p class="card-text">{{ current_variant.price | money }}</p>
      <p class="card-text">{{ item.description }}</p>
      <a href="{{ item.url | within: collection }}" class="btn btn-primary stretched-link">{{ 'general.navigation.discover_product' | t }}</a>
    </div>
  {% if featured %}
      </div>
    </div>
  {% endif %}
</div>
