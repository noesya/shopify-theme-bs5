{% case grid %}
  {% when 1 %}
    {%- assign col = '' -%}
    {%- assign mb = '' -%}
  {% when 2 %}
    {%- assign col = 'row-cols-md-2' -%}
    {%- assign mb = 'mb-3 mb-md-0' -%}
  {% when 3 %}
    {%- assign col = 'row-cols-md-3' -%}
    {%- assign mb = 'mb-3 mb-md-0' -%}
  {% when 4 %}
  {%- assign col = 'row-cols-md-3 row-cols-lg-4' -%}
  {%- assign mb = 'mb-3 mb-md-0' -%}
{% endcase %}

{%- if background -%}
  {%- assign custom_background = 'bg-light' -%}
{%- endif -%}

{%- assign align = '' -%}
{%- if center -%}
  {%- assign align = 'justify-content-md-center' -%}
{%- endif -%}

<div class="py-5 {{ custom_background }}">
  <div class="container">
    {% if title != blank %}
      <div class="text-center">
        <h2>{{ title | escape }}</h2>
        {% if subtitle != blank %}
          <p>{{ subtitle | escape }}</p>
        {% endif %}
      </div>
    {% endif %}
    <div class="row row-cols-1 {{ col }} {{ align }}">
      {% for block in section.blocks limit: section.blocks.size %}
        {%- assign block_align = '' -%}
        {%- if block.settings.center -%}
          {%- assign block_align = 'text-center' -%}
        {%- endif -%}
        <div class="col {{ mb }} {{ block_align }}" {{ block.shopify_attributes }}>
          {% if block.settings.title != blank %}
            <h3>{{ block.settings.title | escape }}</h3>
          {% endif %}
          <div class="stars">
            {% assign rate = block.settings.rating %}
            {% assign rate_remaining = 5 | minus: rate %}
            {% for i in (1..rate) %}
              <span class="material-icons-outlined">star</span>
            {% endfor %}
            {% for i in (1..rate_remaining) %}
              <span class="material-icons-outlined">star_border</span>
            {% endfor %}
          </div>
          {% if block.settings.text != blank %}
            <div class="rte">{{ block.settings.text }}</div>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  </div>
</div>
